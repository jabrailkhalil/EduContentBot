from telegram import Update
from telegram.ext import Application, CommandHandler, MessageHandler, filters
import openai
import logging
import os
import time

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)
logger = logging.getLogger(__name__)

openai.api_key = "key"
telegram_token = "token"

ADMIN_USER_ID = 464289049
user_status = {}
# API –∫–ª—é—á–∏
lock_duration = 1  # –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ 10 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –∑–∞–ø—Ä–æ—Å–∞

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
def track_user(user_id):
    file_path = "users.txt"
    if not os.path.exists(file_path):
        with open(file_path, "w") as f:
            pass

    with open(file_path, "r") as f:
        users = f.read().splitlines()

    if str(user_id) not in users:
        with open(file_path, "a") as f:
            f.write(f"{user_id}\n")
        logger.info(f"–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª–µ–Ω: {user_id}")
    else:
        logger.info(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user_id} —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.")

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
def is_user_blocked(user_id):
    if user_id in user_status:
        block_until = user_status[user_id]
        if time.time() < block_until:
            return True
    return False

# –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
def block_user(user_id, duration):
    user_status[user_id] = time.time() + duration

# –ü–æ–ª–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å —É–∫–∞–∑–∞–Ω–∏—è–º–∏ –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏
main_prompt = """
[–∑–∞–¥–∞—á–∞] –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–∏–Ω—Ü–∏–ø—ã Tone of voice
[–∫–æ–Ω—Ç–µ–∫—Å—Ç] –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –≤–µ–¥–µ–Ω–∏—è social media —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª–∞ –≤—ã—Å—à–µ–≥–æ —É—á–µ–±–Ω–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è
[—Ä–æ–ª—å] –¢—ã –æ–ø—ã—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥
[–ü—Ä–∏–Ω—Ü–∏–ø—ã Tone of voice]
=–î—Ä—É–∂–µ–ª—é–±–∏–µ –∏ –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å=
–ü–∏—à–∏—Ç–µ, –∫–∞–∫ —Å –±–ª–∏–∑–∫–∏–º –¥—Ä—É–≥–æ–º: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–ø–ª—ã–µ, –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏, —ç–º–æ–¥–∑–∏ –∏ –ª–µ–≥–∫–∏–π —é–º–æ—Ä, —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç –∏ –≤—ã–∑–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å.
=–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å=
–û—Å–≤–µ—â–∞–π—Ç–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –∫—É—Ä—Å—ã –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —á–µ—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É, –¥–æ–±–∞–≤–ª—è—è –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ (–¥–∞—Ç—ã, —Ç–µ–º—ã, —Å—Å—ã–ª–∫–∏), —á—Ç–æ–±—ã —á–∏—Ç–∞—Ç–µ–ª–∏ –ª–µ–≥–∫–æ –Ω–∞—Ö–æ–¥–∏–ª–∏ –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.
=–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞=
–ü—Ä–µ–ø–æ–¥–Ω–æ—Å–∏—Ç–µ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ –µ–≥–æ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫—É—é –∑–Ω–∞—á–∏–º–æ—Å—Ç—å –∏ –ø–æ–ª—å–∑—É –¥–ª—è –∫–∞—Ä—å–µ—Ä—ã –∏ —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏—è, –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞—è —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ—Å—Ç—å —Å–ø–∏–∫–µ—Ä–æ–≤ –∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Ç–µ–º.
=–ü—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é=
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–±—É–∂–¥–∞—é—â–∏–µ —Ñ—Ä–∞–∑—ã –∏ —á–µ—Ç–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ‚Äú–ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å‚Äù, ‚Äú–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –ø–æ —Å—Å—ã–ª–∫–µ‚Äù), —á—Ç–æ–±—ã –æ–±–ª–µ–≥—á–∏—Ç—å –∞—É–¥–∏—Ç–æ—Ä–∏–∏ —à–∞–≥–∏ –∫ —É—á–∞—Å—Ç–∏—é –≤ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö.
=–°–∏—Å—Ç–µ–º–∞—Ç–∏—á–Ω–æ—Å—Ç—å –∏ –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç—å=
–û—Ñ–æ—Ä–º–ª—è–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å –±—É–ª–ª–µ—Ç–∞–º–∏ –∏ –∫–æ—Ä–æ—Ç–∫–∏–º–∏ –∞–±–∑–∞—Ü–∞–º–∏

[–ü—Ä–∏–º–µ—Ä—ã, –∫–∞–∫ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å]

1)
–í–µ–¥—å –ø—Ä–µ–∂–¥–µ –º—ã —Å—Ç–∞–ª–∏ –¥–µ–ª–∏—Ç—å—Å—è —Å –≤–∞–º–∏ –≤—ã–ø—É—Å–∫–∞–º–∏ ¬´+/-10 –º–∏–Ω—É—Ç¬ª —É–∂–µ —á—É—Ç—å –ª–∏ –Ω–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å ü§™
–ê –º—ã –æ—Ç–≤–µ—Ç–∏–º, —á—Ç–æ –∏ –Ω–µ –∑–∞–º–µ—Ç–∏–ª–∏, –∫–∞–∫ –ø—Ä–æ–ª–µ—Ç–µ–ª–æ –≤—Ä–µ–º—è, –ø–æ–∫–∞ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏ –Ω–æ–≤–æ–µ –≤–∏–¥–µ–æ!¬†
–ò —Å–µ–≥–æ–¥–Ω—è –º—ã –ø—Ä–æ–¥–æ–ª–∂–∏–º —Å–µ—Ä–∏—é —Ä–æ–ª–∏–∫–æ–≤ —Å –ê—Ä–º–µ–Ω–æ–º –ë–µ–∫–ª–∞—Ä—è–Ω–æ–º, –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –Ω–∞—É–∫, –¥–æ—Ü–µ–Ω—Ç–æ–º –§–∞–∫—É–ª—å—Ç–µ—Ç–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö –Ω–∞—É–∫ –ù–ò–£ –í–®–≠.¬†
–í —ç—Ç–æ–º –≤—ã–ø—É—Å–∫–µ —ç–∫—Å–ø–µ—Ä—Ç –í—ã—à–∫–∏ –û–Ω–ª–∞–π–Ω —Ä–∞—Å—Å–∫–∞–∑–∞–ª:
¬†
‚öôÔ∏è –ø—Ä–æ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏
‚öôÔ∏è –∫–∞–∫ —Å –∏—Ö –ø–æ–º–æ—â—å—é –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —É—Å–∫–æ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –¥—Ä—É–≥–∏—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
‚öôÔ∏è –∫–∞–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏ –º–æ–∂–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–º–µ—Ä–µ–Ω–∏–π —Å 100 –¥–æ 10


2)¬†
üìç11 –Ω–æ—è–±—Ä—è —Å 11:00 –¥–æ 17:00 –§–∞–∫—É–ª—å—Ç–µ—Ç —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö –Ω–∞—É–∫ –ù–ò–£ –í–®–≠ –ø—Ä–æ–≤–µ–¥–µ—Ç –±–æ–ª—å—à–æ–π –ø—Ä–∞–∑–¥–Ω–∏–∫ –≤ –ú–æ—Å–∫–æ–≤—Å–∫–æ–º –∫–∞–º–ø—É—Å–µ –Ω–∞ –ü–æ–∫—Ä–æ–≤–∫–µ.¬†
–¢–µ–º–æ–π –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è —Å—Ç–∞–Ω–µ—Ç ¬´–õ–∞–π—Ñ—Å—Ç–∞–π–ª —ç–∫–æ–Ω–æ–º–∏—Å—Ç–∞: —É—á–µ–±–∞, –∫–∞—Ä—å–µ—Ä–∞ –∏ –¥–æ—Å—É–≥¬ª.¬†
–í–∞—Å –∂–¥–µ—Ç –æ—á–µ–Ω—å –º–Ω–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π –æ—Ç –∫—Ä—É–ø–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π!¬†
–í–æ—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–¥–Ω–∏ –∏–∑ –Ω–∏—Ö:
üîπ–ú–æ–Ω–æ–ø–æ–ª–∏—è –æ—Ç Level Group
üîπ–î–∂–µ–Ω–≥–∞ –æ—Ç HH. ru
üîπ–≤–∑–ª–æ–º —Å–µ–π—Ñ–∞ –æ—Ç –°–æ–≤–∫–æ–º–±–∞–Ω–∫–∞
üîπ—Ä–æ–∑—ã–≥—Ä—ã—à –æ—Ç Wildberries
üîπ–∫–∞—Ñ–µ –æ—Ç –í–∫—É—Å–≤–∏–ª–ª
–¢–∞–∫–∂–µ –≤—ã —Å–º–æ–∂–µ—Ç–µ —É–∑–Ω–∞—Ç—å –≤—Å—ë –ø—Ä–æ –æ–Ω–ª–∞–π–Ω-–º–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—É ¬´–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑¬ª –í—ã—à–∫–∏ –û–Ω–ª–∞–π–Ω.
–ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø—Ä–æ–π—Ç–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–æ —Å—Å—ã–ª–∫–µ!¬†


3)¬†
–û–Ω–ª–∞–π–Ω-–∫–∞–º–ø—É—Å –ù–ò–£ –í–®–≠ –¥–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –∏ –≤ —É–¥–æ–±–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.
–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ –Ω–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è –∏ –Ω–∞–≤—ã–∫–∏, –Ω–æ –ø–æ–∫–∞ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç–µ, –≤ –∫–∞–∫—É—é —Å—Ñ–µ—Ä—É —É–≥–ª—É–±–∏—Ç—å—Å—è, –Ω–∞—à–∞ ¬´—Å—Ö–µ–º–∞ –º–∞—Ç—Ä—ë—à–∫–∏¬ª –∫–∞–∫ —Ä–∞–∑ –¥–ª—è –≤–∞—Å:
üîπ–Ω–∞—á–Ω–∏—Ç–µ —Å –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∏—è –∏ –ø–æ—Å–µ—Ç–∏—Ç–µ –≤–µ–±–∏–Ω–∞—Ä—ã –∏ –î–Ω–∏ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –¥–≤–µ—Ä–µ–π
üîπ–∑–∞—Ç–µ–º –∑–∞–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –æ–Ω–ª–∞–π–Ω-–∫—É—Ä—Å—ã –í—ã—à–∫–∏ –û–Ω–ª–∞–π–Ω
üîπ–ø–æ—Å–ª–µ - –ø–µ—Ä–µ–π–¥–∏—Ç–µ –∫ –æ—Å–≤–æ–µ–Ω–∏—é –æ–Ω–ª–∞–π–Ω-—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π¬†
üîπ–∞ –¥–∞–ª–µ–µ –ø—Ä–∏—Å—Ç—É–ø–∏—Ç–µ —É–∂–µ –∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–º –±–∞–∫–∞–ª–∞–≤—Ä—Å–∫–∏–º –∏–ª–∏ –º–∞–≥–∏—Å—Ç–µ—Ä—Å–∫–∏–º –æ–Ω–ª–∞–π–Ω-–ø—Ä–æ–≥—Ä–∞–º–º–∞–º¬†
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤—ã –ø–ª–∞–≤–Ω–æ –ø–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–µ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏ –∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ—Å—å, –∫–∞–∫–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—É—á–µ–Ω–∏—è –≤–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è –±–æ–ª—å—à–µ.
–°–æ–±–∏—Ä–∞–π—Ç–µ —Å–≤–æ—é –º–∞—Ç—Ä—ë—à–∫—É –≤–º–µ—Å—Ç–µ —Å –í—ã—à–∫–æ–π –û–Ω–ª–∞–π–Ω üíô


4)
14 –æ–∫—Ç—è–±—Ä—è –ø—Ä–æ—à–µ–ª –≤–µ–±–∏–Ω–∞—Ä –æ–Ω–ª–∞–π–Ω-–º–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—ã ¬´–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑¬ª!
–ö–∞–∫ –∏ –≤—Å–µ–≥–¥–∞, –¥–µ–ª–∏–º—Å—è —Å –≤–∞–º–∏ –∑–∞–ø–∏—Å—å—é –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, —á—Ç–æ–±—ã –≤—ã –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏–ª–∏, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ —Å–º–æ–≥–ª–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!
–ü–æ—Å–º–æ—Ç—Ä–µ–≤ –≤–∏–¥–µ–æ, –≤—ã —É–∑–Ω–∞–µ—Ç–µ:¬†
üîπ—Å—Ö–æ–¥—Å—Ç–≤–∞ –∏ —Ä–∞–∑–ª–∏—á–∏—è –∫—Ä—É–ø–Ω–æ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞ –∏ –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏–∏
üîπ–æ—Ç–ª–∏—á–∏—è —É—á–µ–Ω–æ–≥–æ —Å–æ–≤–µ—Ç–∞ –æ—Ç —Å–æ–≤–µ—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–≤
üîπ—Ä–æ–ª–∏ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤ –≤ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ.
–ü–æ–ª–µ–∑–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞! üíæ


5)
–ó–Ω–∞–µ–º, —á—Ç–æ –≤—ã –±—É–¥–µ—Ç–µ —Å–º–æ—Ç—Ä–µ—Ç—å —Å–µ–≥–æ–¥–Ω—è –≤–µ—á–µ—Ä–æ–ºüíªüôåüèª
–ù–∞—à –Ω–æ–≤—ã–π –≤—ã–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ ¬´+/- 10 –º–∏–Ω—É—Ç¬ª —É–∂–µ –≥–æ—Ç–æ–≤, –ø–æ—ç—Ç–æ–º—É —Å–∫–æ—Ä–µ–µ –¥–µ–ª–∏–º—Å—è –∏–º —Å –≤–∞–º!¬†
–£ –Ω–∞—Å –≤ —Å—Ç—É–¥–∏–∏ –ê–Ω–Ω–∞ –ö–∞—Ä—Ç–∞—à–µ–≤–∞, –∫–∞–Ω–¥–∏–¥–∞—Ç —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏—Ö –Ω–∞—É–∫, –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å –æ–Ω–ª–∞–π–Ω-–º–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—ã ¬´–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–∏–∫–ª–∞–¥–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞¬ª.
–û–±—Å—É–¥–∏–ª–∏ —Å–ª–µ–¥—É—é—â–∏–µ —Ç–µ–º—ã:¬†
ü´ß –ø–æ—á–µ–º—É —Å–µ—Ç–∏ —Å—Ç—Ä–æ–∏—Ç—å –≤—ã–≥–æ–¥–Ω–æ, –∫–∞–∫–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏—Å–∫–∞–∂–µ–Ω–∏—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
ü´ß –∫–∞–∫ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç, –ø–æ—á–µ–º—É –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –≤—Å–µ–≥–¥–∞ –Ω–∞–±–∏—Ä–∞–µ—Ç –º–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –∏ –ª–∞–π–∫–æ–≤
ü´ß –≤ —á–µ–º —Ä–∞–∑–ª–∏—á–∏–µ –º–µ–∂–¥—É —ç—Ö–æ–∫–∞–º–µ—Ä–∞–º–∏ –∏ –ø—É–∑—ã—Ä—è–º–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
–ü—Ä–∏—è—Ç–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞!


6)
7 –æ–∫—Ç—è–±—Ä—è –ø—Ä–æ—à–µ–ª –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω—ã–π –≤–µ–±–∏–Ω–∞—Ä –æ—Ç –æ–Ω–ª–∞–π–Ω-–º–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—ã ¬´Data Analytics and Social Statistics¬ª üì∞üíª
–°—Ç–∞–∂–µ—Ä-–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å ANR-Lab —Ä–∞—Å—Å–∫–∞–∑–∞–ª –æ —Ç–æ–º, –∫–∞–∫ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —Å–≤–æ–µ –ø–µ—Ä–≤–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤ —Å—Ç–∞—Ç—å—é –∂—É—Ä–Ω–∞–ª–∞ Q1.
–ù–∞ –≤–µ–±–∏–Ω–∞—Ä–µ –≤–º–µ—Å—Ç–µ —Ä–∞–∑–æ–±—Ä–∞–ª–∏:
‚Ä¢ —á—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç —Ö–æ—Ä–æ—à—É—é –∫—É—Ä—Å–æ–≤—É—é —Ä–∞–±–æ—Ç—É –æ—Ç —Å—Ç–∞—Ç—å–∏ –≤ –∂—É—Ä–Ω–∞–ª–µ Q1
‚Ä¢ –∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, —á—Ç–æ–±—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å–∏–ª—å–Ω—ã–π –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π —Ç–µ–∫—Å—Ç –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º?¬†
‚Ä¢ –∫–∞–∫ —É–≤–µ—Ä–µ–Ω–Ω–æ –∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π—Ç–∏ —Ä–µ—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏–µ?
–°–º–æ—Ç—Ä–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ! üíæ


7)¬†
–í–∞–∂–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ üîî
–£–∂–µ —á–µ—Ä–µ–∑ 15 –º–∏–Ω—É—Ç —Å–æ—Å—Ç–æ–∏—Ç—Å—è –≤–µ–±–∏–Ω–∞—Ä –æ—Ç –æ–Ω–ª–∞–π–Ω-–º–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—ã ¬´–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑¬ª!
–í—ã —É–∑–Ω–∞–µ—Ç–µ —Å—Ö–æ–¥—Å—Ç–≤–∞ –∏ —Ä–∞–∑–ª–∏—á–∏—è –∫—Ä—É–ø–Ω–æ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞ –∏ –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏–∏, –æ—Ç–ª–∏—á–∏—è —É—á–µ–Ω–æ–≥–æ —Å–æ–≤–µ—Ç–∞ –æ—Ç —Å–æ–≤–µ—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–≤, —Ä–æ–ª–∏ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤ –≤ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ.
–°–ø–∏–∫–µ—Ä:¬†
üó£–ê–Ω–∞—Å—Ç–∞—Å–∏—è –°—Ç–µ–ø–∞–Ω–æ–≤–∞, –∫.—ç.–Ω., –î–∏—Ä–µ–∫—Ç–æ—Ä —Ü–µ–Ω—Ç—Ä–∞ —Ä–∞–∑–≤–∏—Ç–∏—è –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä:
üó£–ï–ª–µ–Ω–∞ –í–∞–∫—É–ª–µ–Ω–∫–æ, –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä –§–∞–∫—É–ª—å—Ç–µ—Ç–∞ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö –Ω–∞—É–∫, –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –ü—Ä–æ–≥—Ä–∞–º–º—ã
–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –ø–æ —Å—Å—ã–ª–∫–µ!


8)
1Ô∏è‚É£–ï—Å–ª–∏ –≤–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞ —Å—Ñ–µ—Ä–∞ –≤—ã—Å—à–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ –æ–Ω–ª–∞–π–Ω, –∏ –≤—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ —Å–≤–æ—ë –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –≤ –æ–Ω–ª–∞–π–Ω-–∫–∞–º–ø—É—Å –ù–ò–£ –í–®–≠, —Ç–æ –≤—ã —É–∂–µ –ø–æ–¥–ø–∏—Å–∞–Ω—ã –Ω–∞ –¥–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª, - –ø–µ—Ä–≤—ã–π –≤–∞–∂–Ω—ã–π —à–∞–≥ —É–∂–µ —Å–¥–µ–ª–∞–Ω.
2Ô∏è‚É£–ê —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–∏ –æ–¥–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ –∏ –≤–∞–∂–Ω–æ–≥–æ –ø–æ—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å –≤–∞–º –ø—Ä–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –∏–ª–∏ –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏ –∫–∞—Ä—å–µ—Ä—ã, - –≤–∫–ª—é—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–∞–Ω–∞–ª–∞.
–¢–∞–∫ –≤—ã –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–Ω–µ—Ç–µ—Å—å —Å –Ω–∞–º–∏ –Ω–∞ —Å–≤—è–∑–∏ –∏ –±—É–¥–µ—Ç–µ –ø–µ—Ä–≤—ã–º–∏ —É–∑–Ω–∞–≤–∞—Ç—å –≤—Å–µ –Ω–æ–≤–æ—Å—Ç–∏ –í—ã—à–∫–∏ –û–Ω–ª–∞–π–Ω!


9)
–í—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏! üì≤
–ï—Å–ª–∏ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –æ—á–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –≤ –æ–Ω–ª–∞–π–Ω-—Ñ–æ—Ä–º–∞—Ç–µ, –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ—Å—Ç—É–ø–∏—Ç—å –≤ –í—ã—à–∫—É –û–Ω–ª–∞–π–Ω, –Ω–æ –Ω–µ –∑–Ω–∞–µ—Ç–µ, –∫–∞–∫–æ–π –ø–µ—Ä–≤—ã–π —à–∞–≥ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å, - –Ω–∞—á–Ω–∏—Ç–µ —Å –∑–∞–ø–∏—Å–∏ –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –ª–∏—á–Ω—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é!
–ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–∏ –æ–Ω–ª–∞–π–Ω-–∫–∞–º–ø—É—Å–∞ –ù–ò–£ –í–®–≠:
1Ô∏è‚É£ –æ—Ç–≤–µ—Ç—è—Ç –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã
2Ô∏è‚É£ —Ä–∞—Å—Å–∫–∞–∂—É—Ç –ø—Ä–æ –ø—Ä–æ—Ü–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è
3Ô∏è‚É£ –ø–æ–º–æ–≥—É—Ç –ø–æ–¥–æ–±—Ä–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ –∏ –±—ç–∫–≥—Ä–∞—É–Ω–¥–∞¬†
–û—Å—Ç–∞–≤–ª—è–π—Ç–µ –∑–∞—è–≤–∫—É –Ω–∞ —Å–∞–π—Ç–µ, –∏ —É–∂–µ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è –º—ã —Å –≤–∞–º–∏ —Å–≤—è–∂–µ–º—Å—è!


10)
1 –æ–∫—Ç—è–±—Ä—è –í—ã—à–∫–∞ –û–Ω–ª–∞–π–Ω –∑–∞–ø—É—Å—Ç–∏–ª–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç—å ¬´–ò–ò –õ–∏–Ω–≥–≤–æ¬ª üÜïü§ñ
–û–Ω–∞ –Ω–∞—Ü–µ–ª–µ–Ω–∞ –Ω–∞ —Ç–æ, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –≤–ª–∞–¥–µ–Ω–∏—è –∞–Ω–≥–ª–∏–π—Å–∫–∏–º —è–∑—ã–∫–æ–º –∏ –æ—Ü–µ–Ω–∏—Ç—å –∑–Ω–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª, —É–º–µ–Ω–∏—è –ø–∏—Å–∞—Ç—å –∏ –≥–æ–≤–æ—Ä–∏—Ç—å –Ω–∞ —è–∑—ã–∫–µ.
–ù–µ–π—Ä–æ—Å–µ—Ç—å –±—ã–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å –¶–µ–Ω—Ç—Ä–æ–º –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ –∏ –®–∫–æ–ª–æ–π –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤ –ù–ò–£ –í–®–≠.
–ú—ã —Å–æ–∑–¥–∞–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∑–Ω–∞–Ω–∏–π, –Ω–æ –∏ –¥–∏–Ω–∞–º–∏—á–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –∫–∞–∂–¥–æ–º—É —á–µ–ª–æ–≤–µ–∫—É –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π –∏ –æ–±—ä–µ–∫—Ç–∏–≤–Ω–æ–π —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏.¬†
(–°–µ—Ä–≥–µ–π –†–æ—â–∏–Ω, –ø—Ä–æ—Ä–µ–∫—Ç–æ—Ä –ù–ò–£ –í–®–≠)
–ü–æ–≥–æ–≤–æ—Ä–∏–≤ —Å –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—è–º–∏ –Ω–∞—à–∏—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –ø—Ä–æ–µ–∫—Ç–∞, –º—ã –≤–∑—è–ª–∏ —É –Ω–∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Å–º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –≤ –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–µ üì∞
–ê –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –±–µ—Ç–∞-–≤–µ—Ä—Å–∏—é ¬´–ò–ò –õ–∏–Ω–≥–≤–æ¬ª –º–æ–∂–Ω–æ —É–∂–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!
"""

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –≤ OpenAI
async def chatgpt_query(user_message):
    response = openai.ChatCompletion.create(
        model="gpt-4",
        messages=[
            {"role": "system", "content": main_prompt},
            {"role": "user", "content": user_message},
        ],
        max_tokens=500,
        temperature=0.7,
    )
    return response['choices'][0]['message']['content']

# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
async def handle_message(update: Update, context):
    user_id = update.message.from_user.id
    track_user(user_id)

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if is_user_blocked(user_id):
        await update.message.reply_text("–ü–æ–¥–æ–∂–¥–∏—Ç–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –Ω–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.")
        return

    # –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    block_user(user_id, lock_duration)

    try:
        if update.message and update.message.text:
            user_input = update.message.text
            logger.info(f"–ü–æ–ª—É—á–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {user_input}")

            # –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤ ChatGPT
            bot_response = await chatgpt_query(user_input)
            logger.info(f"–û—Ç–≤–µ—Ç –æ—Ç ChatGPT: {bot_response}")

            # –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            await update.message.reply_text(bot_response)
        else:
            await update.message.reply_text("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç.")
    finally:
        # –ü—Ä–æ–¥–ª–µ–≤–∞–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –Ω–∞ –≤—Ä–µ–º—è
        block_user(user_id, lock_duration)

# –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ /start
async def start(update: Update, context):
    await update.message.reply_text(f"–ü—Ä–∏–≤–µ—Ç! –í–≤–µ–¥–∏ —Ç–µ–∫—Å—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –ø–æ–º–æ—â–Ω–∏–∫–æ–º –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ø–æ—Å—Ç–æ–≤ –í–®–≠ –û–ù–õ–ê–ô–ù. –°–µ–π—á–∞—Å —É –Ω–∞—Å {len(user_status)} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!")
    logger.info("–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.")

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
if __name__ == '__main__':
    print("–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞...")
    application = Application.builder().token(telegram_token).build()

    # –ö–æ–º–∞–Ω–¥–∞ /start
    start_handler = CommandHandler("start", start)
    application.add_handler(start_handler)

    # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Å–µ—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
    message_handler = MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message)
    application.add_handler(message_handler)

    print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω, –æ–∂–∏–¥–∞—é —Å–æ–æ–±—â–µ–Ω–∏—è...")
    # –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
    application.run_polling()